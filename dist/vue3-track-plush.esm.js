var e=function(e){var t="".concat(e.baseURL?e.baseURL:"").concat(e.url?e.url:""),n=new Blob([JSON.stringify(e.data||{})],{type:"application/json"});navigator.sendBeacon(t,n)},t=function(){function t(e){var t=this;this.handleClickEvent=function(){t.handleSendTrack("object"==typeof t.trackParams?t.trackParams:{buttonName:t.trackParams})},this.trackConfig=e}return t.getInstance=function(e){return this.instance||(this.instance=new t(e)),this.instance},t.prototype.handleAddClickEvent=function(e){var t=e.el,n=e.trackParams;this.trackParams=n,t.addEventListener("click",this.handleClickEvent)},t.prototype.handleRemoveClickEvent=function(e){e.removeEventListener("click",this.handleClickEvent)},t.prototype.handleSendTrack=function(t){var n=Object.assign({userAgent:navigator.userAgent,pageUrl:window.location.href,projectName:this.trackConfig.projectName,actionType:"点击事件"},t);e({baseURL:this.trackConfig.baseURL,url:this.trackConfig.url,data:n})},t}(),n=function(){function t(e){this.trackConfig=e}return t.getInstance=function(e){return this.instance||(this.instance=new t(e)),this.instance},t.prototype.handleBrowseEvent=function(e){this.handleSendTrack("object"==typeof e?e:{pageName:e})},t.prototype.handleSendTrack=function(t){var n=Object.assign({userAgent:navigator.userAgent,pageUrl:window.location.href,projectName:this.trackConfig.projectName,actionType:"浏览事件"},t);e({baseURL:this.trackConfig.baseURL,url:this.trackConfig.url,data:n})},t}(),a=function(e){var n=new t(e),a={};Object.keys(e).forEach((function(t){if(!["baseURL","url","projectName"].includes(t)){var n=e[t];a[t]=n}})),n.handleSendTrack(a)},c=function(e){var t=new n(e),a={};Object.keys(e).forEach((function(t){if(!["baseURL","url","projectName"].includes(t)){var n=e[t];a[t]=n}})),t.handleSendTrack(a)},r=function(){function e(){}return e.install=function(a,c){e.prototype.clickInstance=t.getInstance(c),e.prototype.browserInstance=n.getInstance(c),a.directive("track",{mounted:function(t,n){var a=n.arg,c=n.value;switch(a){case"click":e.prototype.clickInstance.handleAddClickEvent({el:t,trackParams:c});break;case"browse":e.prototype.browserInstance.handleBrowseEvent(c)}},updated:function(t,n){var a=n.arg,c=n.value,r=n.oldValue;if(JSON.stringify(c)!==JSON.stringify(r))switch(a){case"click":e.prototype.clickInstance.handleRemoveClickEvent(t),e.prototype.clickInstance.handleAddClickEvent({el:t,trackParams:c});break;case"browse":e.prototype.browserInstance.handleBrowseEvent(c)}},unmounted:function(t,n){if("click"===n.arg)e.prototype.clickInstance.handleRemoveClickEvent(t)}})},e}();export{n as Browse,t as Click,c as browseEvent,a as clickEvent,r as default};
